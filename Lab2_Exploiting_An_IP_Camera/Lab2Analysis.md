#### Lab2_Exploiting_An_IP_Camera

## Tools needed:  
IP Camera, Attify Badge, Attify VM, Cables, baudrate.py, rootpw.py, Multimeter, USB to mini-usb cable, Breadboard (To avoid soldering)   

## Introduction  
In the second lab of the Attify Exploitation Kit we focus on gaining root access to a IP camera. The camera used for the lab is “D-Link DCS-8000LH”. Our approach to completing this lab is by utilizing a UART (Universal Asynchronous Receiver-Transmitter) connection via the Attify Badge granted to us via the kit. UART is very simple and only uses two wires between transmitter and receiver to transmit and receive in both directions [1]. For this lab we will only be using the GND (ground), Tx (Transmitter) and Rx (Receiver) pins on the attify badge, which can be seen in the following image.   

![](Lab2_Exploiting_An_IP_Camera/imgs/figure1.png)
**Figure 1.**Pins of the attify badge based on device communication. 

## Methodology
Our first step is to disassemble the camera so that we can find the communication ports and understand the different types of chips that can be found within a IoT device. Afterwards we gained the data sheet for this chips from where we can identify the communication port or commonly known as header port or serial port. From there we used a multimeter to identify the 4 ports used for the connection. After identifying the ports, we make a connection from the badge and then to the laptop. One important note is that we do not use de VCC port in the badge or header port. This is because, we are powering the camera from the mini-usb port and adding that connection could damage the device. Then, we launched the Attify VM, and we made sure the usb ports is recognized by the VM. To make sure the USB connection is recognized we run the “lsusb” command. Another way is to look for the ttyUSB connection in the terminal. After we check that the device u=is being recognized we look and run the baudrate.py script. This python script allows us find the baud rate at which the device operates, to switch baud rates use the arrow keys. To know which baud rate is the correct one keep switching configuration until you get something that is readable.

After we find the correct baud rate we save the configuration and run the minicom software, the script should give you a prompt to run it just hit yes. After a while you should receive a login prompt to the device, similar to a SSH connection. To get the credentials we run another python script, called ‘rootpw.py’. After reading the script we notice that we need the device’s MAC address to get it just look at the info on the camera. After inputting the devices MAC address on the script you should get a result similar to this format: “root:XXXXXXX”. Where the field with Xs is the password and root is the username. Once you input the user credentials at the minicom software you should have root access to the camera.    

# Step By Step with images  

1.Identify the chips
![](Lab2_Exploiting_An_IP_Camera/imgs/step1.png)
2.Find the UART port
![](Lab2_Exploiting_An_IP_Camera/imgs/step2.png)
3.Use multimeter to Identify the UART ports.  
4.Make correct connections.  
![](Lab2_Exploiting_An_IP_Camera/imgs/step5.jpg)
5.Connect to PC and check device is detected.
![](Lab2_Exploiting_An_IP_Camera/imgs/step7.png)
6.Find device’s baudrate
![](Lab2_Exploiting_An_IP_Camera/imgs/step8.png)
![](Lab2_Exploiting_An_IP_Camera/imgs/step9.png)

## Problems: 
-When the team were checking the baud rate of the device the pins were connected incorrectly causing some delay in the progress of the lab. 

## Conclusion:
During this lab we went over the steps to get root access to the IP camera. Firstly we had to open the camera and identify the UART port. Secondly we had to identify each pin from the header port, we completed this by using a multimeter and checking the voltage difference from pin to pin. After identifying the pins we connected it to the badge and to the PC. We then run, the baudrate.py python script to identify the device’s baud rate. Finally, we entered the root credentials that we got fromt the rootpw.py script and as a result we gained root access to the camera.  

## References:
https://www.rohde-schwarz.com/lat/productos/prueba-y-medicion/essentials-test-equipment/digital-oscilloscopes/entendiendo-el-uart_254524.html